---
title: Data Story
output:
  word_document: default
  html_document: default
---
---
# Math Course Data Story

#Introduction

The purpose of the report is to conduct exploratary data analysis regarding where students are in completing a math course.

There is no immediate or specific questions to be addressed beyond what story does this data tell.

The following information has been provided regarding the math course being analyzed.

  Each of 5 schools (A, B, C, D and E) is implementing the same math course this semester, with 35 lessons. There are 30 sections total. The semester is about 3/4 of the way through.

  For each section, we record the number of students who are:
    • very ahead (more than 5 lessons ahead)
    • middling (5 lessons ahead to 0 lessons ahead)
    • behind (1 to 5 lessons behind)
    • more behind (6 to 10 lessons behind)
    • very behind (more than 10 lessons behind)
    • completed (finished with the course)

Additional information given about the case suggest that the progress of each student is self reported.

#Analysis and Models

#About the Data

It is a simple and small data set, little data cleaning is needed.

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, warning=FALSE, results = 'show',include = TRUE,messages=FALSE)

library(tidyverse)
library(forcats)
library(ggplot2)
library(dplyr)
library(stargazer)
library(caret)
library(modelr)
```

# Reading in the data.
```{r getData, include=TRUE}
#replacing any possible blank entries as 'NA'.

storyteller <- read_csv("C:/Users/amcvicar/OneDrive/School/Syracuse/707 Data Analytics/week2_resources_2_2/data-storyteller.csv", na = c(""))

#checking data types to see what may need changing
str(storyteller)
```


# Data Cleaning

The data cleaning and reformatting steps are as follows:
  The school column is of the character type is transformed into a factor.
  The section column is a numeric type and is transformed into a factor.
  The progress statuses are given as columns with a count of students in each as the datavalue per school and section. These student counts are updated from a number to integer data type.

```{r cleanData1, include=TRUE}
storyteller$School <- factor(storyteller$School)

#The section column is of the Numeric type and should be be a factor instead

storyteller$Section <- factor(storyteller$Section)

#Each of the remaining columns is a discrete count of the students in each category.
#As it is not continuous the columns 'Very Ahead', 'Middling', 'Behind', 'More behind', 'Very behind'
#and 'Completed' should all be integers.

storyteller$`Very Ahead +5` <- as.integer(storyteller$`Very Ahead +5`)
storyteller$`Middling +0` <- as.integer(storyteller$`Middling +0`)
storyteller$`Behind -1-5` <- as.integer(storyteller$`Behind -1-5`)
storyteller$`More Behind -6-10` <- as.integer(storyteller$`More Behind -6-10`)
storyteller$`Very Behind -11` <- as.integer(storyteller$`Very Behind -11`)
storyteller$Completed <- as.integer(storyteller$Completed)

```

## Organizing the Data Structure

The data is structure can be updated to be a more user friendly.
The rows are reordered to assume we would be most interested in seeing progress by section before school and reordering the progress statuses to a consistent completed to very behind. This reordering will allow us to visually compare sections across schools and to each other as well as follow a more natural status order.

```{r Organize}

#Reordering columns to get a cleaner picture. I.E. 'Completed' being shifted to the other side.
#And section being a unique identifier is moved to the leftmost column.

storytellerTemp <- storyteller[,c(2,1,8,3,4,5,6,7)]

storyteller <- storytellerTemp
  
#displaying top 5 rows
head(storyteller)

```

## Missing Data

There are not missing data values.

```{r cleanData2, include=TRUE}

#Checking for any NA values
sum(is.na(storyteller))

#There are no NA values in this dataset.

#The dataset is cleaned
head(storyteller)

```

# EDA and Data Viz

The following observation was provided with the dataset:

Observation: To be considered 'ahead' in any way, there are two categories: 'Very Ahead' and 'Completed'. There are 3 cateories in place to describe 'behind' which may lead the responses to be lopsided in favor of generally 'behind' over 'generally ahead'.

Additionally, I would make the following observations:
  'Middling' could be confusing wording, a desription of 'On Track' may have been conducive to accurate reporting.

  Middling as a segment of on track or 5 ahead suggests a question regarding expectations that may obsurfacate understanding where students are with their studies, are the students expected to be on a certain lesson or are they expected to be ahead? 

  There is  not an equal segment to completed such as not started. 
  
  3/4 of the way through a 30 lesson course would indicate that students should be on lesson 22 or 23. The middling segment would be from 22 - 28. The very ahead segment would only be able to apply to students on lessons 27, 28, 29, & 30, assuming it is only the last three lessons, the data is skewed.

  Additionally, the potential count of very behind changes as the course progresses. Does being 11 or more sessions behind mean failure, and also signify a milestone at session 11?




```{r viz, include=TRUE}

# Creating a bar chart to show the number of sections from each school
SchoolValues <- c(length(which(storyteller$School=='A')), length(which(storyteller$School == 'B')), length(which(storyteller$School == 'C')), length(which(storyteller$School == 'D')), length(which(storyteller$School == 'E')))

barplot(SchoolValues, names.arg = c('A', 'B', 'C', 'D', 'E'), main = 'Number of sections Per School')

#plotting section and Completed and summarizing the data

barplot(storyteller$Completed, main = '#completed students / section', names.arg = c(1:30))
summary(storyteller$Completed)
```

## Further Data Cleaning based on EDA and Viz

```{r cleanData3, include=TRUE}

#Plotting section and Very Ahead and summarizing

barplot(storyteller$`Very Ahead +5`, main = 'number of very ahead students per section', names.arg = c(1:30))

summary(storyteller$`Very Ahead +5`)
#plotting section and Middling and summarizing

barplot(storyteller$`Middling +0`, main = 'number of Middling students per section', names.arg = c(1:30))

summary(storyteller$`Middling +0`)
#plotting section and Behind and summarizing

barplot(storyteller$`Behind -1-5`, main = 'number of Behind students per section', names.arg = c(1:30))

summary(storyteller$`Behind -1-5`)
#plotting section and More Behind

barplot(storyteller$`More Behind -6-10`, main = 'number of More Behind students per section', names.arg = c(1:30))


summary(storyteller$`More Behind -6-10`)
#Plotting section and Very Behind

barplot(storyteller$`Very Behind -11`, main = 'number of Very Behind students per section', names.arg = c(1:30))

summary(storyteller$`Very Behind -11`)
#determining the number of students in each category
StudentSums <- colSums(storyteller[,3:8])

sum(StudentSums)

#determining the amount of students in each section

SectionSums <- rowSums(storyteller[,3:8])

data.frame(SectionSums)

#Creating a barplot to show distribution

StudentSums <- colSums(storyteller[,3:8])
barplot(StudentSums, main = "Student totals across all categories")

```
The data set came with the following observations noted:
 - 14% of students are on track in the middling category.
 - Nearly 20% of students have completed the program.
 - Nearly 50% of students in this program are in the 'behind' category alone.
 - Students in the bottom two categories make up 20% of the sample. Meaning ~70% of students are behind in the curicculum. 
 
This data suggests that understanding how many failures to start, false starts, and what lesson each segment is actually on are critical missing pieces of information

```{r EDA, include=TRUE}

StudentSums/sum(StudentSums)

```

More observations:
 - 14% of students are on track in the middling category.
 - Nearly 20% of students have completed the program.
 - Nearly 50% of students in this program are in the 'behind' category alone.
 - Students in the bottom two categories make up 20% of the sample. Meaning ~70% of students are behind in the curicculum. 

```{r middling, include=TRUE}

plot(storyteller$Completed, storyteller$`Middling +0`)

```

The progress pattern is consistent between schools. The extreme behind group needs to be further segmented to eliminate or understand the group better and if they are trying or are false starts.

```{r groupAnalysis, include=TRUE}

storytellerA <- storyteller[which(storyteller$School == "A"),]
storytellerB <- storyteller[which(storyteller$School == "B"),]
storytellerC <- storyteller[which(storyteller$School == "C"),]
storytellerD <- storyteller[which(storyteller$School == "D"),]
storytellerE <- storyteller[which(storyteller$School == "E"),]

StudentSumsA <- colSums(storytellerA[3:8])
StudentSumsA

barplot(StudentSumsA, main = "School A")

StudentSumsB <- colSums(storytellerB[3:8])
StudentSumsB

barplot(StudentSumsB, main = "School B")

StudentSumsC <- colSums(storytellerC[3:8])
StudentSumsC

barplot(StudentSumsC, main = "School C")

StudentSumsD <- colSums(storytellerD[3:8])
StudentSumsD

barplot(StudentSumsD, main = "School D")

StudentSumsE <- colSums(storytellerE[3:8])
StudentSumsE

barplot(StudentSumsE, main = "School E")

```

# Initial Observations and Remarks

Observations received with dataset:

 - Schools B and D do not follow the same picture that was shown by the data combined. 
 - A, C, and E follow generally the same pattern as shown by figure 1
 - B shows many students ahead of the curriculum, completing the program. 
 - The majority of students that are behind are behind by 1-5 assignments and very few are in the lowest two categories. 
 - This is the most positive picture that the data shows out of the schools.
 - School D is the opposite with a small percentage of students having completed all assignments and a large percentage of students being considered 'Very Behind'. 

Comparing the two schools as a representation of the population of program takers ... 

```{r cleanData, include=TRUE}
sum(StudentSumsB)/sum(StudentSums)

sum(StudentSumsD)/sum(StudentSums)
```



```{r finalANA, include=TRUE}

#looking at the data to determine quality sections

barplot(storytellerB$Completed, names.arg =c(1:12),ylim=c(0,30), main = "Students Completed by Section")
```


```{r final2, include=TRUE}
rowSums(storytellerB[,3:8])

barplot(storytellerB$`Behind -1-5`+storytellerB$`More Behind -6-10`+storytellerB$`Very Behind -11`, names.arg =c(1:12), ylim=c(0,30), main = "Students Behind by Section")
```

#Conclusion

It seems the segments may give a high level view of where students are in their progress but an overall deeper dive is frustrated.

The progress segments may be valuable to alert for bucket metrics such as how many students are done, how many are on track or better, how many need attention, and how many are in the unrecoverable failure zone, but any deeper understanding is frustrated.

It would have been preferable to receive the more granular and precice information on what lessons students where on and what lesson they should be on to be on track.

The data results confirm that there is a difference in progress that can be related to specific school sections as well as varying overall trends at schools being driven by how the segments are implemented at the school or the students enrolled or how enrollment is handled and monitored.